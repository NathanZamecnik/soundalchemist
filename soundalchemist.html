<head>
  <title>soundalchemist XCXC</title>
  <script type="text/javascript" src="/soundcloud.player.api.js">
  </script>
</head>

<body>
  {{> main}}
</body>

<template name="main">
  {{#if isLobby}}
  {{> lobby}}
  {{else}}
  {{> room}}
  {{/if}}
</template>

<!-- xcxc get rid of a href="#" -->

<template name="lobby">
  <a href="#" id="newroom">new room</a>
</template>

<template name="room">
  {{> sources}}
  <hr />
  {{> recommendations}}
</template>

<template name="processing">
  {{#if processing}}<p>processing...</p>{{/if}}
</template>

<template name="sources">
  {{> processing}}
  {{#each list}}
  {{> source-track}}
  {{/each}}

  <input id="url"
         placeholder="e.g. http://soundcloud.com/russliquid/russ-liquid-soundcloud-mix"
         />
  <input id="add" type="button" value="add" />
</template>

<template name="recommendations">
  {{#each list}}
  {{> recommendation-track}}
  {{/each}}
</template>

<template name="source-track">
  <p id="source-track-{{trackId}}">
    {{weight}} <a class="change_weight" href="#">change</a>
    <a href="#" class="unmake-source">unstore as a source</a>
    <a href="{{url}}" target="_blank">{{url}}</a>
    {{trackId}}
  </p>
</template>

<template name="recommendation-track">
  <p>
    {{rank}}
    {{spectrum}}
    <a href="#" class="upvote">+1</a>
    <a href="#" class="downvote">-1</a>
    <a href="#" class="skip">skip</a>
    {{> outer_track}}
  </p>
</template>

<template name="outer_track">
  {{> track}}
</template>

<template name="track">
  <iframe id="{{playerId}}" frameborder="no" height="166" scrolling="no"
          src="http://w.soundcloud.com/player/?url={{escapedUrl}}&auto_play=false&show_artwork=true&color=d31502"
          width="100%">
  </iframe>
</template>

